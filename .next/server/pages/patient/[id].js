(()=>{var e={};e.id=7203,e.ids=[636,3220,7203],e.modules={30671:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},67129:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},65755:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},24163:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},89295:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},79523:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},69875:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},40570:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>R,default:()=>L,getServerSideProps:()=>O,getStaticPaths:()=>B,getStaticProps:()=>I,reportWebVitals:()=>K,routeModule:()=>J,unstable_getServerProps:()=>V,unstable_getServerSideProps:()=>Y,unstable_getStaticParams:()=>Z,unstable_getStaticPaths:()=>$,unstable_getStaticProps:()=>H});var a,n={};s.r(n),s.d(n,{default:()=>U});var i=s(63865),r=s(9455),l=s(30671),o=s(49407),c=s(19473),u=s(8732),d=s(27912),m=s.n(d);s(29965);var p=s(86715),h=s(82015),g=s(79523),x=s.n(g),b=s(69875),N=s.n(b);function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(null,arguments)}let f=function(e){return h.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),a||(a=h.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 14 4-4 4 4"})))};var v=s(74601),y=s.n(v);function D({patientData:e,onDelete:t,onEdit:s}){let[a,n]=(0,h.useState)(!0);console.log(e);let i=e||{};return console.log(i),(0,u.jsxs)("div",{className:N().patientCard,children:[(0,u.jsx)("div",{className:N().cardHeader,onClick:()=>n(!a),children:(0,u.jsxs)("h3",{children:[i.full_name||"Kein Name"," ",(0,u.jsx)("span",{className:N().c,children:a?(0,u.jsx)(f,{className:N().caret}):(0,u.jsx)(f,{className:`${N().rotate} ${N().caret}`})})]})}),a&&(0,u.jsxs)("div",{className:N().cardContent,children:[(0,u.jsx)(y(),{onClick:t,children:"Patient l\xf6schen"}),(0,u.jsx)(y(),{onClick:s,children:"Patient bearbeiten"}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Name:"})," ",(0,u.jsx)("span",{children:i.full_name||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Krankenversicherung:"})," ",(0,u.jsx)("span",{children:i.insurance||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Privat:"})," ",(0,u.jsx)("span",{children:i.is_private||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Geburtsdatum:"})," ",(0,u.jsx)("span",{children:i.birth_date||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Geschlecht:"})," ",(0,u.jsx)("span",{children:i.gender||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Adresse:"})," ",(0,u.jsx)("span",{children:i.address||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Telefonnummer:"})," ",(0,u.jsx)("span",{children:i.phoneNumber||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Email:"})," ",(0,u.jsx)("span",{children:i.email||"Keine Angabe"})]}),(0,u.jsxs)("div",{className:N().cardRow,children:[(0,u.jsx)("strong",{children:"Notfallkontakt:"})," ",(0,u.jsx)("span",{children:i.emergency_contact||"Keine Angabe"})]})]})]})}var k=s(84209),C=s(65755),w=s.n(C),S=s(89295),P=s.n(S),E=s(67129),A=s.n(E),_=s(24163),F=s.n(_),q=s(91106),T=s.n(q),G=s(4722);let M=[{label:"Anamnese",value:"ana",component:function({document:e,onSave:t,onClose:s,mode:a}){let n=(0,p.useRouter)(),{id:i}=n.query,r=(0,k.Z)(),l=r?.user;if(!r){n.replace("/login");return}let o={type:"ana",title:e?.title||"",author:`${l.first_name} ${l.surname}`||"",patientId:i||"",firstName:e?.data?.firstName||"",lastName:e?.data?.lastName||"",birthDate:e?.data?.birthDate||"",gender:e?.data?.gender||"",allergies:e?.data?.allergies||"",currentMedications:e?.data?.currentMedications||"",chronicDiseases:e?.data?.chronicDiseases||"",currentSymptoms:e?.data?.currentSymptoms||"",familyHistory:e?.data?.familyHistory||"",smoking:e?.data?.smoking||!1,alcohol:e?.data?.alcohol||!1,weight:e?.data?.weight||"",height:e?.data?.height||"",bloodPressure:e?.data?.bloodPressure||"",additionalNotes:e?.data?.additionalNotes||""},[c,d]=(0,h.useState)(o),m=e=>{let{name:t,value:s,type:a,checked:n}=e.target;d({...c,[t]:"checkbox"===a?n:s})},g=async e=>{e.preventDefault();let t={type:c.type,title:c.title,author:c.author,data:{firstName:c.firstName,lastName:c.lastName,birthDate:c.birthDate,gender:c.gender,allergies:c.allergies,currentMedications:c.currentMedications,chronicDiseases:c.chronicDiseases,currentSymptoms:c.currentSymptoms,familyHistory:c.familyHistory,smoking:c.smoking,alcohol:c.alcohol,weight:c.weight,height:c.height,bloodPressure:c.bloodPressure,additionalNotes:c.additionalNotes},patientId:c.patientId};try{let e=await fetch("/api/medical_record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();console.log(a),e.ok?(console.log("Dokument erfolgreich gespeichert:",a),d(o),s&&s()):console.error("Fehler beim Speichern des Dokuments:",a),window.location.reload()}catch(e){console.error("Fehler beim Senden der Anfrage:",e)}};return(0,u.jsxs)("form",{onSubmit:g,children:[(0,u.jsx)("h1",{children:"Anamnese"}),(0,u.jsx)("input",{name:"title",value:c.title,onChange:m,placeholder:"Titel",className:w().input}),(0,u.jsx)("input",{name:"firstName",value:c.firstName,onChange:m,placeholder:"Vorname",className:w().input}),(0,u.jsx)("input",{name:"lastName",value:c.lastName,onChange:m,placeholder:"Nachname",className:w().input}),(0,u.jsx)("input",{type:"date",name:"birthDate",value:c.birthDate,onChange:m,className:w().input}),(0,u.jsx)("br",{}),(0,u.jsxs)("select",{name:"gender",className:w().input,value:c.gender,onChange:m,children:[(0,u.jsx)("option",{value:"",children:"Geschlecht w\xe4hlen"}),(0,u.jsx)("option",{value:"male",children:"Mann"}),(0,u.jsx)("option",{value:"female",children:"Frau"})]}),(0,u.jsx)("input",{name:"allergies",value:c.allergies,onChange:m,placeholder:"Allergien",className:w().input}),(0,u.jsx)("input",{name:"currentMedications",value:c.currentMedications,onChange:m,placeholder:"Aktuelle Medikamente",className:w().input}),(0,u.jsx)("input",{name:"chronicDiseases",value:c.chronicDiseases,onChange:m,placeholder:"Chronische Erkrankungen",className:w().input}),(0,u.jsx)("input",{name:"currentSymptoms",value:c.currentSymptoms,onChange:m,placeholder:"Aktuelle Symptome",className:w().input}),(0,u.jsx)("textarea",{name:"familyHistory",value:c.familyHistory,onChange:m,placeholder:"Familienanamnese",className:w().input}),(0,u.jsx)("br",{}),(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"checkbox",name:"smoking",checked:c.smoking,onChange:m}),"Rauchen"]}),(0,u.jsxs)("label",{children:[(0,u.jsx)("input",{type:"checkbox",name:"alcohol",checked:c.alcohol,onChange:m}),"Alkohol"]}),(0,u.jsx)("input",{type:"number",name:"weight",value:c.weight,onChange:m,placeholder:"Gewicht (kg)",className:w().input}),(0,u.jsx)("input",{type:"number",name:"height",value:c.height,onChange:m,placeholder:"Gr\xf6\xdfe (cm)",className:w().input}),(0,u.jsx)("input",{name:"bloodPressure",value:c.bloodPressure,onChange:m,placeholder:"Blutdruck (bpm)",className:w().input}),(0,u.jsx)("textarea",{name:"additionalNotes",value:c.additionalNotes,onChange:m,placeholder:"Zus\xe4tzliche Notizen",className:w().input}),"view"!==a&&(0,u.jsx)("button",{type:"submit",children:"Speichern"})]})}},{label:"Untersuchungsprotokoll",value:"unt",component:function({sampleDocuments:e,setSampleDocuments:t,mode:s}){let[a,n]=(0,h.useState)({type:"unt",Titel:"",UntersuchungsDatum:"",Untersucher:"",Befunde:"",Diagnose:"",Empfehlungen:"",NachkontrollDatum:"",Bildgebung:"",LaborErgebnisse:"",Vitalzeichen:{Herzfrequenz:"",Blutdruck:"",Atemfrequenz:"",Temperatur:"",Sauerstoffsättigung:""},KörperlicheUntersuchung:{Allgemeinzustand:"",KopfUndHals:"",Brustkorb:"",Bauch:"",Extremitäten:"",Neurologisch:""},ZusätzlicheNotizen:""}),[i,r]=(0,h.useState)(""),l=e=>{let{name:t,value:s,type:a,checked:i}=e.target;if(t.includes(".")){let[e,a]=t.split(".");n(t=>({...t,[e]:{...t[e],[a]:s}}))}else n(e=>({...e,[t]:"checkbox"===a?i:s}))},o=Object.entries(a).filter(([e,t])=>e.includes(i)||JSON.stringify(t).includes(i)).map(([e,t])=>(0,u.jsxs)("div",{className:P().formGroup,children:[(0,u.jsx)("label",{children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),"object"==typeof t?Object.entries(t).map(([t,s])=>(0,u.jsx)("input",{name:`${e}.${t}`,value:s,onChange:l,placeholder:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),className:P().inputFeld},t)):"UntersuchungsDatum"===e||"NachkontrollDatum"===e?(0,u.jsx)("input",{type:"date",name:e,value:t,onChange:l,className:P().inputFeld}):(0,u.jsx)("input",{name:e,value:t,onChange:l,placeholder:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),className:P().inputFeld})]},e));return(0,u.jsxs)("div",{className:P().formularContainer,children:[(0,u.jsx)("h2",{className:P().titelUeberschrift,children:"Untersuchungsprotokoll erstellen"}),(0,u.jsx)("input",{type:"text",placeholder:"Feldsuche",value:i,onChange:e=>r(e.target.value),className:P().inputFeld}),(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(e=>[...e||[],a]),n({Titel:"",UntersuchungsDatum:"",Untersucher:"",Befunde:"",Diagnose:"",Empfehlungen:"",NachkontrollDatum:"",Bildgebung:"",LaborErgebnisse:"",Vitalzeichen:{Herzfrequenz:"",Blutdruck:"",Atemfrequenz:"",Temperatur:"",Sauerstoffsättigung:""},KörperlicheUntersuchung:{Allgemeinzustand:"",KopfUndHals:"",Brustkorb:"",Bauch:"",Extremitäten:"",Neurologisch:""},ZusätzlicheNotizen:""})},children:[o.length>0?o:(0,u.jsx)("p",{className:P().keineFelderNachricht,children:"Keine passenden Felder gefunden."}),"view"!==s&&(0,u.jsx)("button",{type:"submit",className:P().submitButton,children:"Speichern"})]})]})}},{label:"Arztbrief",value:"bri",component:function({document:e,onSave:t,mode:s}){let[a,n]=(0,h.useState)({type:"bri",title:e?.title||"",patientName:e?.patientName||"",patientID:e?.patientID||"",dateOfBirth:e?.dateOfBirth||"",gender:e?.gender||"",address:e?.address||"",diagnosis:e?.diagnosis||"",findings:e?.findings||"",therapy:e?.therapy||"",medication:e?.medication||"",recommendations:e?.recommendations||"",followUp:e?.followUp||"",doctorName:e?.doctorName||"",doctorSignature:e?.doctorSignature||"",issueDate:e?.issueDate||new Date().toISOString().split("T")[0]}),i=e=>{let{name:t,value:s}=e.target;n({...a,[t]:s})};return(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(a)},children:[(0,u.jsx)("h2",{children:"Arztbrief"}),(0,u.jsx)("input",{name:"title",value:a.title,onChange:i,placeholder:"Titel des Arztbriefs",className:w().input}),(0,u.jsx)("input",{name:"patientName",value:a.patientName,onChange:i,placeholder:"Name des Patienten",className:w().input}),(0,u.jsx)("input",{name:"patientID",value:a.patientID,onChange:i,placeholder:"Patienten-ID",className:w().input}),(0,u.jsx)("input",{type:"date",name:"dateOfBirth",value:a.dateOfBirth,onChange:i,className:w().input}),(0,u.jsxs)("select",{name:"gender",className:w().input,value:a.gender,onChange:i,children:[(0,u.jsx)("option",{value:"",children:"Geschlecht w\xe4hlen"}),(0,u.jsx)("option",{value:"male",children:"M\xe4nnlich"}),(0,u.jsx)("option",{value:"female",children:"Weiblich"}),(0,u.jsx)("option",{value:"other",children:"Anderes"})]}),(0,u.jsx)("input",{name:"address",value:a.address,onChange:i,placeholder:"Adresse des Patienten",className:w().input}),(0,u.jsx)("textarea",{name:"diagnosis",value:a.diagnosis,onChange:i,placeholder:"Diagnose",className:w().input}),(0,u.jsx)("textarea",{name:"findings",value:a.findings,onChange:i,placeholder:"Befunde",className:w().input}),(0,u.jsx)("textarea",{name:"therapy",value:a.therapy,onChange:i,placeholder:"Therapie",className:w().input}),(0,u.jsx)("textarea",{name:"medication",value:a.medication,onChange:i,placeholder:"Medikation",className:w().input}),(0,u.jsx)("textarea",{name:"recommendations",value:a.recommendations,onChange:i,placeholder:"Empfehlungen",className:w().input}),(0,u.jsx)("input",{type:"date",name:"followUp",value:a.followUp,onChange:i,placeholder:"Nachfolgetermin",className:w().input}),(0,u.jsx)("input",{name:"doctorName",value:a.doctorName,onChange:i,placeholder:"Name des Arztes",className:w().input}),(0,u.jsx)("input",{name:"doctorSignature",value:a.doctorSignature,onChange:i,placeholder:"Arztsignatur",className:w().input}),(0,u.jsx)("input",{type:"date",name:"issueDate",value:a.issueDate,onChange:i,placeholder:"Ausstellungsdatum",className:w().input}),"view"!==s&&(0,u.jsx)("button",{type:"submit",children:"Speichern"})]})}},{label:"Rezept",value:"rez",component:function({document:e,onSave:t}){let{id:s}=(0,p.useRouter)().query,a=(0,k.Z)(),n=a?.user,[i,r]=(0,h.useState)({type:"rez",title:e?.title||"Titel",author:`${n.first_name} ${n.surname}`||"",patientFirstName:e?.data?.patientFirstName||"",patientLastName:e?.data?.patientLastName||"",birthDate:e?.data?.birthDate||"",medications:e?.data?.medications||[{id:Date.now(),medicationName:"",dosage:"",intakeFrequency:"",duration:"",specialInstructions:""}],prescribingDoctor:e?.data?.prescribingDoctor||"",issueDate:e?.data?.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e?.data?.additionalNotes||""}),l=e=>{let{name:t,value:s}=e.target;r({...i,[t]:s})},o=(e,t,s)=>{let a=i.medications.map((a,n)=>n===e?{...a,[t]:s}:a);r({...i,medications:a})},c=e=>{let t=i.medications.filter((t,s)=>s!==e);r({...i,medications:t})},d=async e=>{e.preventDefault();let a={patientId:s,type:"rez",title:i.title||"Title",author:i.author,data:{patientFirstName:i.patientFirstName,patientLastName:i.patientLastName,birthDate:i.birthDate,medications:i.medications,prescribingDoctor:i.prescribingDoctor,issueDate:i.issueDate,additionalNotes:i.additionalNotes}};try{let e=await fetch("/api/medical_record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await e.json();console.log("Medical doc saved",s),e.ok?(console.log("Dokument gespeichert:",s),t&&t(s)):console.error("Fehler beim Speichern:",s.error)}catch(e){console.error("Fehler bei der Anfrage:",e)}};return(0,u.jsxs)("div",{className:F().formContainer,children:[(0,u.jsx)("h2",{className:F().titleHeading,children:"Rezept"}),(0,u.jsxs)("form",{onSubmit:d,children:[(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Rezepttitel"}),(0,u.jsx)("input",{className:F().inputField,name:"title",value:i.title,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Vorname des Patienten"}),(0,u.jsx)("input",{className:F().inputField,name:"patientFirstName",value:i.patientFirstName,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Nachname des Patienten"}),(0,u.jsx)("input",{className:F().inputField,name:"patientLastName",value:i.patientLastName,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Geburtsdatum"}),(0,u.jsx)("input",{className:F().inputField,type:"date",name:"birthDate",value:i.birthDate,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Medikamente"}),i.medications.map((e,t)=>(0,u.jsxs)("div",{className:F().medicationItem,children:[(0,u.jsxs)("h3",{className:F().medicationTitle,children:["Medikament ",t+1," "]}),(0,u.jsx)("input",{className:F().inputField,placeholder:"Medikamentenname",value:e.medicationName,onChange:e=>o(t,"medicationName",e.target.value)}),(0,u.jsx)("input",{className:F().inputField,placeholder:"Dosierung (z.B. 500mg)",value:e.dosage,onChange:e=>o(t,"dosage",e.target.value)}),(0,u.jsx)("input",{className:F().inputField,placeholder:"Einnahmeh\xe4ufigkeit",value:e.intakeFrequency,onChange:e=>o(t,"intakeFrequency",e.target.value)}),(0,u.jsx)("input",{className:F().inputField,placeholder:"Dauer der Einnahme",value:e.duration,onChange:e=>o(t,"duration",e.target.value)}),(0,u.jsx)("textarea",{className:F().textareaField,placeholder:"Besondere Hinweise",value:e.specialInstructions,onChange:e=>o(t,"specialInstructions",e.target.value)}),(0,u.jsx)("button",{type:"button",className:F().removeButton,onClick:()=>c(t),children:"Entfernen"})]},e.id)),(0,u.jsx)("button",{type:"button",className:F().addButton,onClick:()=>{r({...i,medications:[...i.medications,{id:Date.now(),medicationName:"",dosage:"",intakeFrequency:"",duration:"",specialInstructions:""}]})},children:"Medikament hinzuf\xfcgen"})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Verschreibender Arzt"}),(0,u.jsx)("input",{className:F().inputField,name:"prescribingDoctor",value:i.prescribingDoctor,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Ausstellungsdatum"}),(0,u.jsx)("input",{className:F().inputField,type:"date",name:"issueDate",value:i.issueDate,onChange:l})]}),(0,u.jsxs)("div",{className:F().formGroup,children:[(0,u.jsx)("label",{children:"Zus\xe4tzliche Notizen"}),(0,u.jsx)("textarea",{className:F().textareaField,name:"additionalNotes",value:i.additionalNotes,onChange:l})]}),"view"!==mode&&(0,u.jsx)("button",{type:"submit",className:F().submitButton,children:"Rezept speichern"})]})]})}},{label:"Arbeitsunf\xe4higkeitsbescheinigung",value:"aub",component:function({document:e,onSave:t,mode:s}){let[a,n]=(0,h.useState)({type:"aub",title:e?.title||"",patientFirstName:e?.patientFirstName||"",patientLastName:e?.patientLastName||"",birthDate:e?.birthDate||"",startDate:e?.startDate||"",endDate:e?.endDate||"",partialIncapacity:e?.partialIncapacity||!1,incapacityReason:e?.incapacityReason||"",prescribingDoctor:e?.prescribingDoctor||"",issueDate:e?.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e?.additionalNotes||""}),i=e=>{let{name:t,type:s,value:i,checked:r}=e.target;n({...a,[t]:"checkbox"===s?r:i})};return(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(a)},className:A().formContainer,children:[(0,u.jsx)("h1",{className:A().titleHeading,children:"AU"}),(0,u.jsx)("h2",{className:A().h2,children:"Bescheinigung"}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{className:A().inputField,name:"title",value:a.title,onChange:i,placeholder:"Titel der Bescheinigung",disabled:"view"===s})}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{className:A().inputField,name:"patientFirstName",value:a.patientFirstName,onChange:i,placeholder:"Vorname des Patienten",disabled:"view"===s})}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{className:A().inputField,name:"patientLastName",value:a.patientLastName,onChange:i,placeholder:"Nachname des Patienten",disabled:"view"===s})}),(0,u.jsx)("h4",{children:"Geburtsdatum"}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{type:"date",className:A().inputField,name:"birthDate",value:a.birthDate,onChange:i,disabled:"view"===s})}),(0,u.jsx)("h3",{children:"Zeitraum der Arbeitsunf\xe4higkeit"}),(0,u.jsx)("h4",{children:"Startdatum"}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{type:"date",className:A().inputField,name:"startDate",value:a.startDate,onChange:i,disabled:"view"===s})}),(0,u.jsx)("h4",{children:"Enddatum"}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{type:"date",className:A().inputField,name:"endDate",value:a.endDate,onChange:i,disabled:"view"===s})}),(0,u.jsx)("div",{className:A().checkboxGroup,children:(0,u.jsxs)("label",{className:A().checkboxLabel,children:[(0,u.jsx)("input",{type:"checkbox",name:"partialIncapacity",checked:a.partialIncapacity,onChange:i,disabled:"view"===s}),"Teilweise Arbeitsunf\xe4higkeit"]})}),a.partialIncapacity&&(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("textarea",{className:A().textareaField,name:"incapacityReason",value:a.incapacityReason,onChange:i,placeholder:"Grund der teilweisen Arbeitsunf\xe4higkeit",disabled:"view"===s})}),(0,u.jsx)("h3",{children:"Arztinformationen"}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{className:A().inputField,name:"prescribingDoctor",value:a.prescribingDoctor,onChange:i,placeholder:"Verschreibender Arzt",disabled:"view"===s})}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("input",{type:"date",className:A().inputField,name:"issueDate",value:a.issueDate,onChange:i,disabled:"view"===s})}),(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("textarea",{className:A().textareaField,name:"additionalNotes",value:a.additionalNotes,onChange:i,placeholder:"Zus\xe4tzliche Notizen",disabled:"view"===s})}),"view"!==s&&(0,u.jsx)("div",{className:A().formGroup,children:(0,u.jsx)("button",{type:"submit",className:A().submitButton,children:"speichern"})})]})}}];function z(){let{data:e,status:t}=(0,G.useSession)(),s=(0,p.useRouter)(),{id:a}=s.query,[n,i]=(0,h.useState)(null),[r,l]=(0,h.useState)(),[o,c]=(0,h.useState)(),[d,m]=(0,h.useState)(),[g,b]=(0,h.useState)([]),[N,j]=(0,h.useState)([]),[f,v]=(0,h.useState)(!1),[y,k]=(0,h.useState)({Name:n?.full_name,Krankenversicherung:"",Privat:"Nein",Geburtsdatum:"",Geschlecht:"",Adresse:"",Telefonnummer:"",Email:"",Notfallkontakt:""});console.log("MEDICAL DOCUMENTS: ",N),console.log(N.map(e=>e._id));let[C,w]=(0,h.useState)({open:!1,document_id:N._id});console.log("Delete Modal Object ",C);let[S,P]=(0,h.useState)(M[0]),[E,A]=(0,h.useState)("view"),[_,F]=(0,h.useState)(null),[q,z]=(0,h.useState)(""),[U,L]=(0,h.useState)(!1),[I,B]=(0,h.useState)("all"),[O,R]=(0,h.useState)(!1),K=e=>{F(e),console.log("DES IS DOC: ",e),console.log("CURRENT ",N),P(M.find(t=>t.value===e.type)||M[0]),A("view"),R(!0),c(e)},H=async e=>{try{let t=await fetch(`/api/DELETE/medical_record/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch...");let s=await t.json();return console.log("Data to delete: ",s),s}catch(e){return console.error("Error: ",e),null}},$=async()=>{w(!1),window.location.reload(),console.log("Attempting to delete document with ID:",C.document_id);try{let e=await H(C.document_id);console.log("DELETED DATA: ",e),e?(j(e=>e.filter(e=>e._id!==C.document_id)),R(!1),console.log("Document deleted successfully!")):console.error("Error: Dokument konnte nicht gel\xf6scht werden.")}catch(e){console.error("Fehler beim L\xf6schen:",e)}},Z=async e=>{try{let t=await fetch(`/api/DELETE/patient/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch...");let a=await t.json();return console.log("Data to delete: ",a),s.replace("/appointment"),a}catch(e){return console.error("Error: ",e),null}},V=async()=>{w(!1),window.location.reload(),console.log("Attempting to delete document with ID:",a);try{let e=await Z(a);console.log("DELETED DATA: ",e),e?(j(e=>e.filter(e=>e._id!==a)),R(!1),console.log("Document deleted successfully!")):console.error("Error: Dokument konnte nicht gel\xf6scht werden.")}catch(e){console.error("Fehler beim L\xf6schen:",e)}},Y=e=>{if(!e||!e._id){console.error("Ung\xfcltiges Dokument oder fehlende ID.",e);return}console.log("Selected document ID: ",e._id),w({open:!0,document_id:e._id})},J=()=>{R(!1),P(null),F(null),c(null)},W=async e=>{e.preventDefault();let t=Q();if(console.log("Formdata before update",y),0===Object.keys(t).length)try{let e=await fetch(`/api/GET/patients/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:y.Name,insurance:y.Krankenversicherung,is_private:y.Privat,gender:y.Geschlecht,birth_date:y.Geburtsdatum,address:y.Adresse,phoneNumber:y.Telefonnummer,email:y.Email,emergency_contact:y.Notfallkontakt})});e.ok?(console.log("Patientendaten aktualisiert:",y),l(!1),window.location.reload()):console.error("Fehler beim Aktualisieren der Patientendaten:",e.statusText)}catch(e){console.error("Error:",e.message)}else m(t)},X=e=>{let{name:t,value:s}=e.target;k(e=>({...e,[t]:s}))},Q=()=>{let e={};return y.Name||(e.Name="Name ist erforderlich."),y.Krankenversicherung||(e.Krankenversicherung="Krankenversicherung ist erforderlich."),y.Geburtsdatum||(e.Geburtsdatum="Geburtsdatum ist erforderlich."),y.Email||(e.Email="Email ist erforderlich."),e},ee=("all"===I?N:N.filter(e=>e.type===I)).reduce((e,t)=>(e[t.createdAt]=e[t.createdAt]||[],e[t.createdAt].push(t),e),{});return console.log("DOCUMENTS ARRAY: ",N),console.log("DELETE MODAL STATE: ",C),(0,u.jsxs)("div",{className:x().container,children:[(0,u.jsx)(T(),{href:"/appointment",children:(0,u.jsx)("h3",{children:"Zur\xfcck zum Terminkalendar"})}),(0,u.jsx)("h1",{children:"Patientendetails"}),(0,u.jsxs)("p",{children:["Patient ID: ",a]}),(0,u.jsxs)("div",{className:x().patient,children:[(0,u.jsxs)("div",{className:x().content,children:[(0,u.jsxs)("div",{className:x().search,onFocus:()=>L(!0),onBlur:()=>L(!1),children:[(0,u.jsx)("input",{type:"text",placeholder:"Geben Sie [tag] + Leertaste ein.",value:q,onChange:e=>z(e.target.value),onKeyDown:e=>{if(" "===e.key){let t=M.find(e=>e.label.toLowerCase()===q.toLowerCase()||e.value.toLowerCase()===q.toLowerCase());t&&(P(t),A("edit"),F(null),z(""),L(!1),R(!0)),e.preventDefault()}},className:x().input}),U&&(0,u.jsx)("ul",{className:x().dropdown,children:M.filter(e=>e.label.toLowerCase().includes(q.toLowerCase())||e.value.toLowerCase().includes(q.toLowerCase())).map(e=>(0,u.jsxs)("li",{onClick:()=>z(e.value),children:[e.label," ",(0,u.jsxs)("span",{children:[e.value," + Leertaste"]})]},e.value))})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:x().filters,children:[(0,u.jsx)("button",{className:`${x().filterButton} ${"all"===I?x().selected:""}`,onClick:()=>B("all"),children:"Alle Eintr\xe4ge"}),M.map(e=>(0,u.jsx)("button",{className:`${x().filterButton} ${I===e.value?x().selected:""}`,onClick:()=>B(e.value),children:e.label},e.value))]}),Object.keys(ee).map(e=>(0,u.jsxs)("div",{className:x().query,children:[(0,u.jsx)("h3",{children:e&&new Date(e).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),ee[e].map(e=>(0,u.jsxs)("div",{className:x().documentItem,children:[(0,u.jsx)("span",{className:x().docType,children:e.type}),(0,u.jsx)("span",{className:x().docTitle,children:e.title}),(0,u.jsx)("span",{className:x().docDate,children:e.createdAt?new Date(e.createdAt).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Kein Datum"}),(0,u.jsx)("button",{className:x().viewButton,onClick:()=>K(e),children:"Anzeigen"}),(0,u.jsx)("button",{className:x().deleteButton,onClick:()=>Y(e),children:"L\xf6schen"})]},e.id))]},e))]})]}),(0,u.jsx)(D,{onDelete:V,onEdit:()=>{n&&(k({Name:n.full_name||"",Krankenversicherung:n.insurance||"",Privat:n.is_private||"Nein",Geburtsdatum:n.birth_date||"",Geschlecht:n.gender||"",Adresse:n.address||"",Telefonnummer:n.phoneNumber||"",Email:n.email||"",Notfallkontakt:n.emergency_contact||""}),l(!0))},patientData:n||null})]}),O&&(0,u.jsx)("div",{className:x().fullscreenModal,children:(0,u.jsxs)("div",{className:x().modalContent,children:[(0,u.jsx)("button",{onClick:J,className:x().closeButton,children:"✖"}),S?.component?(0,u.jsx)(S.component,{document:o,onClose:()=>J(),onSave:e=>{let t={...e,id:Date.now(),date:new Date().toISOString().split("T")[0],type:e.type};switch(console.log("Neues Dokument: ",t),e.type){case"ana":t={...t,firstName:e.firstName||"",lastName:e.lastName||"",birthDate:e.birthDate||"",gender:e.gender||"",allergies:e.allergies||"",currentMedications:e.currentMedications||"",chronicDiseases:e.chronicDiseases||"",currentSymptoms:e.currentSymptoms||"",familyHistory:e.familyHistory||"",smoking:e.smoking||!1,alcohol:e.alcohol||!1,weight:e.weight||0,height:e.height||0,bloodPressure:e.bloodPressure||"",additionalNotes:e.additionalNotes||""};break;case"bri":t={...t,patientName:e.patientName||"",patientID:e.patientID||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",address:e.address||"",diagnosis:e.diagnosis||"",findings:e.findings||"",therapy:e.therapy||"",medication:e.medication||"",recommendations:e.recommendations||"",followUp:e.followUp||"",doctorName:e.doctorName||"",doctorSignature:e.doctorSignature||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0]};break;case"aub":t={...t,patientFirstName:e.patientFirstName||"",patientLastName:e.patientLastName||"",birthDate:e.birthDate||"",startDate:e.startDate||"",endDate:e.endDate||"",partialIncapacity:e.partialIncapacity||!1,incapacityReason:e.incapacityReason||"",prescribingDoctor:e.prescribingDoctor||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e.additionalNotes||""};break;case"rezept":t={...t,patientFirstName:e.patientFirstName||"",patientLastName:e.patientLastName||"",birthDate:e.birthDate||"",medications:e.medications||[],prescribingDoctor:e.prescribingDoctor||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e.additionalNotes||""};break;case"unt":t={...t,Titel:e.Titel||"",UntersuchungsDatum:e.UntersuchungsDatum||"",Untersucher:e.Untersucher||"",Befunde:e.Befunde||"",Diagnose:e.Diagnose||"",Empfehlungen:e.Empfehlungen||"",NachkontrollDatum:e.NachkontrollDatum||"",Bildgebung:e.Bildgebung||"",LaborErgebnisse:e.LaborErgebnisse||"",Vitalzeichen:e.Vitalzeichen||{},KörperlicheUntersuchung:e.KörperlicheUntersuchung||{},ZusätzlicheNotizen:e.ZusätzlicheNotizen||""};break;default:console.error("Unbekannter Typ: ",e.type)}_?j(e=>e.map(e=>e.id===_.id?t:e)):j(e=>[...e,t]),R(!1)},mode:E,documents:N,setSampleDocuments:j}):(0,u.jsx)("p",{children:"Kein Formular verf\xfcgbar"})]})}),C.open&&(0,u.jsx)("div",{className:x().deleteModal,children:(0,u.jsxs)("div",{className:x().modalContent,children:[(0,u.jsx)("p",{children:"Sind Sie sicher, dass Sie dieses Dokument l\xf6schen m\xf6chten?"}),(0,u.jsx)("button",{onClick:$,className:x().deleteButton,children:"Dokument l\xf6schen"}),(0,u.jsx)("button",{onClick:()=>w({open:!1,document_id:N._id}),className:x().cancelButton,children:"Abbrechen"})]})}),r&&(0,u.jsx)("div",{className:x().modalOverlay,children:(0,u.jsxs)("div",{className:x().modalContent,children:[(0,u.jsx)("h2",{children:"Patienten bearbeiten"}),(0,u.jsxs)("form",{className:x().zindex,onSubmit:W,children:[Object.keys(y).map(e=>(0,u.jsxs)("div",{className:x().formGroup,children:[(0,u.jsx)("label",{children:e}),"Privat"===e?(0,u.jsxs)("select",{name:e,value:y[e],onChange:X,className:x().selectInput,children:[(0,u.jsx)("option",{value:"Ja",children:"Ja"}),(0,u.jsx)("option",{value:"Nein",children:"Nein"})]}):(0,u.jsx)("input",{type:"text",name:e,value:y[e],onChange:X,className:x().textInput})]},e)),(0,u.jsxs)("div",{className:x().modalActions,children:[(0,u.jsx)("button",{type:"submit",children:"Hinzuf\xfcgen"}),(0,u.jsx)("button",{type:"button",onClick:()=>l(!1),children:"Abbrechen"})]})]})]})})]})}function U(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m(),{children:[(0,u.jsx)("title",{children:"HestiaMed"}),(0,u.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,u.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,u.jsx)(z,{})]})}let L=(0,l.M)(n,"default"),I=(0,l.M)(n,"getStaticProps"),B=(0,l.M)(n,"getStaticPaths"),O=(0,l.M)(n,"getServerSideProps"),R=(0,l.M)(n,"config"),K=(0,l.M)(n,"reportWebVitals"),H=(0,l.M)(n,"unstable_getStaticProps"),$=(0,l.M)(n,"unstable_getStaticPaths"),Z=(0,l.M)(n,"unstable_getStaticParams"),V=(0,l.M)(n,"unstable_getServerProps"),Y=(0,l.M)(n,"unstable_getServerSideProps"),J=new i.PagesRouteModule({definition:{kind:r.A.PAGES,page:"/patient/[id]",pathname:"/patient/[id]",bundlePath:"",filename:""},components:{App:c.default,Document:o.default},userland:n})},49407:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(8732),n=s(20883);function i(){return(0,a.jsxs)(n.Html,{lang:"en",children:[(0,a.jsx)(n.Head,{}),(0,a.jsxs)("body",{children:[(0,a.jsx)(n.Main,{}),(0,a.jsx)(n.NextScript,{})]})]})}},9455:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},66099:e=>{"use strict";e.exports=require("@mui/system")},37616:e=>{"use strict";e.exports=require("@mui/system/DefaultPropsProvider")},84781:e=>{"use strict";e.exports=require("@mui/system/colorManipulator")},18215:e=>{"use strict";e.exports=require("@mui/system/createStyled")},59989:e=>{"use strict";e.exports=require("@mui/system/createTheme")},77769:e=>{"use strict";e.exports=require("@mui/system/cssVars")},16581:e=>{"use strict";e.exports=require("@mui/system/spacing")},16670:e=>{"use strict";e.exports=require("@mui/system/styleFunctionSx")},76831:e=>{"use strict";e.exports=require("@mui/utils")},28578:e=>{"use strict";e.exports=require("@mui/utils/capitalize")},54341:e=>{"use strict";e.exports=require("@mui/utils/chainPropTypes")},14036:e=>{"use strict";e.exports=require("@mui/utils/composeClasses")},31112:e=>{"use strict";e.exports=require("@mui/utils/createChainedFunction")},21763:e=>{"use strict";e.exports=require("@mui/utils/debounce")},7546:e=>{"use strict";e.exports=require("@mui/utils/deepmerge")},5928:e=>{"use strict";e.exports=require("@mui/utils/deprecatedPropType")},9721:e=>{"use strict";e.exports=require("@mui/utils/elementTypeAcceptingRef")},20985:e=>{"use strict";e.exports=require("@mui/utils/formatMuiErrorMessage")},61119:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClass")},81699:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClasses")},54250:e=>{"use strict";e.exports=require("@mui/utils/isFocusVisible")},29823:e=>{"use strict";e.exports=require("@mui/utils/isMuiElement")},55402:e=>{"use strict";e.exports=require("@mui/utils/ownerDocument")},46875:e=>{"use strict";e.exports=require("@mui/utils/ownerWindow")},39101:e=>{"use strict";e.exports=require("@mui/utils/refType")},48080:e=>{"use strict";e.exports=require("@mui/utils/requirePropFactory")},646:e=>{"use strict";e.exports=require("@mui/utils/resolveProps")},39597:e=>{"use strict";e.exports=require("@mui/utils/setRef")},88190:e=>{"use strict";e.exports=require("@mui/utils/unsupportedProp")},83889:e=>{"use strict";e.exports=require("@mui/utils/useControlled")},21956:e=>{"use strict";e.exports=require("@mui/utils/useEnhancedEffect")},4926:e=>{"use strict";e.exports=require("@mui/utils/useEventCallback")},7376:e=>{"use strict";e.exports=require("@mui/utils/useForkRef")},63310:e=>{"use strict";e.exports=require("@mui/utils/useId")},15206:e=>{"use strict";e.exports=require("@mui/utils/useLazyRef")},710:e=>{"use strict";e.exports=require("@mui/utils/useTimeout")},74956:e=>{"use strict";e.exports=require("clsx")},4722:e=>{"use strict";e.exports=require("next-auth/react")},32270:e=>{"use strict";e.exports=require("next-themes")},40361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},27912:e=>{"use strict";e.exports=require("next/head")},29825:e=>{"use strict";e.exports=require("prop-types")},82015:e=>{"use strict";e.exports=require("react")},22326:e=>{"use strict";e.exports=require("react-dom")},37727:e=>{"use strict";e.exports=require("react-transition-group")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},74075:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[585,1860,883,4601,9473],()=>s(40570));module.exports=a})();