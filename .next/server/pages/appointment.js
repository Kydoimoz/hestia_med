(()=>{var e={};e.id=2727,e.ids=[636,2727],e.modules={8318:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js):\nError: Your custom PostCSS configuration must export a `plugins` key.\n    at getPostCssPlugins (C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\plugins.js:106:15)\n    at async C:\\Users\\musa_\\Desktop\\hestiamed\\node_modules\\next\\dist\\build\\webpack\\config\\blocks\\css\\index.js:124:36")},93141:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>x,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>g,routeModule:()=>T,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>j});var n=s(63865),a=s(9455),i=s(30671),o=s(49407),l=s(19473),c=s(20298),d=e([c]);c=(d.then?(await d)():d)[0];let u=(0,i.M)(c,"default"),p=(0,i.M)(c,"getStaticProps"),m=(0,i.M)(c,"getStaticPaths"),h=(0,i.M)(c,"getServerSideProps"),x=(0,i.M)(c,"config"),g=(0,i.M)(c,"reportWebVitals"),j=(0,i.M)(c,"unstable_getStaticProps"),S=(0,i.M)(c,"unstable_getStaticPaths"),b=(0,i.M)(c,"unstable_getStaticParams"),v=(0,i.M)(c,"unstable_getServerProps"),w=(0,i.M)(c,"unstable_getServerSideProps"),T=new n.PagesRouteModule({definition:{kind:a.A.PAGES,page:"/appointment",pathname:"/appointment",bundlePath:"",filename:""},components:{App:l.default,Document:o.default},userland:c});r()}catch(e){r(e)}})},77408:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(8732),n=s(82015);let a=require("react-big-calendar"),i=require("moment");var o=s.n(i),l=s(86715);require("moment/locale/de");var c=s(8318),d=s.n(c),u=s(4722);o().locale("de");let p=(0,a.momentLocalizer)(o()),m={week:"Woche",day:"Tag",previous:"Zur\xfcck",next:"Weiter",today:"Heute",agenda:"Agenda",showMore:e=>`+${e} mehr`};function h(){let e=(0,l.useRouter)(),{data:t}=(0,u.useSession)(),[s,i]=(t?.user?.practice,(0,n.useState)()),{id:c}=e.query,[h,x]=(0,n.useState)([{id:1,title:"Max Mustermann - Untersuchung",start:new Date(2025,0,7,10,0),end:new Date(2025,0,7,10,30),patient:"Max Mustermann",purpose:"Untersuchung"},{id:2,title:"Anna M\xfcller - Nachuntersuchung",start:new Date(2025,0,8,14,0),end:new Date(2025,0,8,14,30),patient:"Anna M\xfcller",purpose:"Nachuntersuchung"}]),[g,j]=(0,n.useState)(!1),[S,b]=(0,n.useState)(!1),[v,w]=(0,n.useState)(null),[T,f]=(0,n.useState)({}),[P,M]=(0,n.useState)(!1),[k,y]=(0,n.useState)(),[C,_]=(0,n.useState)({patientId:"",startTime:"",endTime:"",purpose:""}),[D,q]=(0,n.useState)([]),N=e=>{f(e),console.log("Event selected:",e),console.log("Patient ID:",e.patientId),b(!0)},I=e=>{let{name:t,value:s}=e.target;_({...C,[t]:s})},A=()=>{j(!1),w(null),_({patientId:"",startTime:"",endTime:"",purpose:""})},L=()=>{b(!1),f(null)},B=async()=>{try{console.log("FormData vor dem Senden:",C);let e={patientId:C.patientId,startTime:new Date(C.startTime).toISOString(),endTime:new Date(C.endTime).toISOString(),purpose:C.purpose.trim()};console.log("Body vor dem Senden an die API:",e);let t=await fetch("/api/appointment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.error("Fehlerdetails von der API:",e),Error(e.message||"Fehler beim Speichern des Termins")}let{appointment:s}=await t.json();x([...h,{patientId:C.patientId?._id,id:s._id||Date.now(),title:`${C.patientId} - ${C.purpose}`,startTime:new Date(C.startTime),endTime:new Date(C.endTime),patient:C.patientId,purpose:C.purpose}]),A(),window.location.reload()}catch(e){console.error("Fehler beim Speichern des Termins:",e.message)}},F=e=>{x(h.filter(t=>t.id!==e)),L()};return(0,r.jsxs)("div",{className:`${d().divContainer}`,children:[(0,r.jsx)(a.Calendar,{localizer:p,events:h,startAccessor:"start",endAccessor:"end",messages:m,views:["week","day"],defaultView:"week",selectable:!0,onSelectSlot:e=>{e&&(w(e),_({...C,startTime:o()(e.start).format("YYYY-MM-DDTHH:mm"),endTime:o()(e.end).format("YYYY-MM-DDTHH:mm")}),j(!0))},onSelectEvent:e=>N(e),min:new Date(0,0,0,8),max:new Date(0,0,0,18)}),g&&(0,r.jsx)("div",{className:d().modalOverlay,children:(0,r.jsxs)("div",{className:d().modalContainer,children:[(0,r.jsx)("h2",{children:"Termin erstellen"}),(0,r.jsx)("label",{children:"Patient:"}),(0,r.jsxs)("select",{name:"patientId",value:C.patientId,onChange:I,className:d().inputField,children:[(0,r.jsx)("option",{value:"",children:"Bitte w\xe4hlen"}),D.map(e=>(0,r.jsx)("option",{onClick:()=>_({...C,patientId:e._id}),value:e._id,children:e.full_name},e._id))]}),(0,r.jsx)("label",{children:"Anfangszeit:"}),(0,r.jsx)("input",{type:"datetime-local",name:"startTime",value:C.startTime,onChange:I,className:d().inputField}),(0,r.jsx)("label",{children:"Endzeit:"}),(0,r.jsx)("input",{type:"datetime-local",name:"endTime",value:C.endTime,onChange:I,className:d().inputField}),(0,r.jsx)("label",{children:"Zweck des Termins:"}),(0,r.jsx)("input",{type:"text",name:"purpose",value:C.purpose,onChange:I,className:d().inputField}),(0,r.jsxs)("div",{className:d().buttonContainer,children:[(0,r.jsx)("button",{onClick:A,className:d().cancelButton,children:"Abbrechen"}),(0,r.jsx)("button",{onClick:B,className:d().saveButton,children:"Termin speichern"})]})]})}),S&&T&&(0,r.jsx)("div",{className:d().modalOverlay,children:(0,r.jsxs)("div",{className:d().modalContainer,children:[(0,r.jsx)("h2",{children:"Termindetails"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Patient:"})," ",T.patient]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Von:"})," ",o()(T.startTime).format("LLLL")]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Bis:"})," ",o()(T.endTime).format("LLLL")]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Zweck:"})," ",T.purpose]}),(0,r.jsxs)("div",{className:d().buttonContainer,children:[(0,r.jsx)("button",{onClick:()=>e.push(`/patient/${T.patientId?._id}`),className:d().viewButton,children:"Zum Patienten"}),(0,r.jsx)("button",{onClick:()=>F(T.id),className:d().deleteButton,children:"L\xf6schen"}),(0,r.jsx)("button",{onClick:L,className:d().cancelButton,children:"Schlie\xdfen"})]})]})})]})}},20298:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>p});var n=s(8732),a=s(27912),i=s.n(a),o=s(18305),l=s(43831);s(90646),s(84995),s(70350),s(50189),s(19874),s(28673),s(87231);var c=s(71521),d=s(77408),u=e([o,l,c]);function p(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Hestia - Med\xae | Bridging Technology and Care for a Healthier Tomorrow."}),(0,n.jsx)("meta",{name:"description",content:"created by Hestia - Med"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(d.A,{})]})}[o,l,c]=u.then?(await u)():u,r()}catch(e){r(e)}})},88163:e=>{"use strict";e.exports=require("@heroicons/react/outline")},7242:e=>{"use strict";e.exports=require("@heroicons/react/solid")},4722:e=>{"use strict";e.exports=require("next-auth/react")},32270:e=>{"use strict";e.exports=require("next-themes")},40361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},27912:e=>{"use strict";e.exports=require("next/head")},82015:e=>{"use strict";e.exports=require("react")},22326:e=>{"use strict";e.exports=require("react-dom")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},8802:e=>{"use strict";e.exports=require("tailwindcss/defaultTheme")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},74075:e=>{"use strict";e.exports=require("zlib")},270:e=>{"use strict";e.exports=import("@react-aria/focus")},87999:e=>{"use strict";e.exports=import("@react-aria/interactions")},43070:e=>{"use strict";e.exports=import("three")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[585,1860,883,6988,2782,1173,9473,5991],()=>s(93141));module.exports=r})();