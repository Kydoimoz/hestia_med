<<<<<<< HEAD
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{60610:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/patient/[id]",function(){return a(44027)}])},44027:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n,i=a(74848),l=a(13368),o=a.n(l);a(29965);var s=a(86715),r=a(96540),c=a(43919),d=a.n(c),u=a(38887),m=a.n(u);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}let h=function(e){return r.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),n||(n=r.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m8 14 4-4 4 4"})))};var g=a(41917);function _(e){let{patientData:t,onDelete:a,onEdit:n}=e,[l,o]=(0,r.useState)(!0);console.log(t);let s=t||{};return console.log(s),(0,i.jsxs)("div",{className:m().patientCard,children:[(0,i.jsx)("div",{className:m().cardHeader,onClick:()=>o(!l),children:(0,i.jsxs)("h3",{children:[s.full_name||"Kein Name"," ",(0,i.jsx)("span",{className:m().c,children:l?(0,i.jsx)(h,{className:m().caret}):(0,i.jsx)(h,{className:"".concat(m().rotate," ").concat(m().caret)})})]})}),l&&(0,i.jsxs)("div",{className:m().cardContent,children:[(0,i.jsx)(g.A,{onClick:a,children:"Patient l\xf6schen"}),(0,i.jsx)(g.A,{onClick:n,children:"Patient bearbeiten"}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Name:"})," ",(0,i.jsx)("span",{children:s.full_name||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Krankenversicherung:"})," ",(0,i.jsx)("span",{children:s.insurance||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Privat:"})," ",(0,i.jsx)("span",{children:s.is_private||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Geburtsdatum:"})," ",(0,i.jsx)("span",{children:s.birth_date||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Geschlecht:"})," ",(0,i.jsx)("span",{children:s.gender||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Adresse:"})," ",(0,i.jsx)("span",{children:s.address||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Telefonnummer:"})," ",(0,i.jsx)("span",{children:s.phoneNumber||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Email:"})," ",(0,i.jsx)("span",{children:s.email||"Keine Angabe"})]}),(0,i.jsxs)("div",{className:m().cardRow,children:[(0,i.jsx)("strong",{children:"Notfallkontakt:"})," ",(0,i.jsx)("span",{children:s.emergency_contact||"Keine Angabe"})]})]})]})}var v=a(49522),x=a(6951),N=a.n(x),b=a(22067),j=a.n(b),f=a(84677),D=a.n(f),y=a(58207),k=a.n(y),C=a(91106),F=a.n(C),w=a(33013);let A=[{label:"Anamnese",value:"ana",component:function(e){var t,a,n,l,o,c,d,u,m,p,h,g,_,x,b;let{document:j,onSave:f,onClose:D,mode:y}=e,k=(0,s.useRouter)(),{id:C}=k.query,F=(0,v.Z)(),w=null==F?void 0:F.user;if(!F){k.replace("/login");return}let A={type:"ana",title:(null==j?void 0:j.title)||"",author:"".concat(w.first_name," ").concat(w.surname)||"",patientId:C||"",firstName:(null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.firstName)||"",lastName:(null==j?void 0:null===(a=j.data)||void 0===a?void 0:a.lastName)||"",birthDate:(null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.birthDate)||"",gender:(null==j?void 0:null===(l=j.data)||void 0===l?void 0:l.gender)||"",allergies:(null==j?void 0:null===(o=j.data)||void 0===o?void 0:o.allergies)||"",currentMedications:(null==j?void 0:null===(c=j.data)||void 0===c?void 0:c.currentMedications)||"",chronicDiseases:(null==j?void 0:null===(d=j.data)||void 0===d?void 0:d.chronicDiseases)||"",currentSymptoms:(null==j?void 0:null===(u=j.data)||void 0===u?void 0:u.currentSymptoms)||"",familyHistory:(null==j?void 0:null===(m=j.data)||void 0===m?void 0:m.familyHistory)||"",smoking:(null==j?void 0:null===(p=j.data)||void 0===p?void 0:p.smoking)||!1,alcohol:(null==j?void 0:null===(h=j.data)||void 0===h?void 0:h.alcohol)||!1,weight:(null==j?void 0:null===(g=j.data)||void 0===g?void 0:g.weight)||"",height:(null==j?void 0:null===(_=j.data)||void 0===_?void 0:_.height)||"",bloodPressure:(null==j?void 0:null===(x=j.data)||void 0===x?void 0:x.bloodPressure)||"",additionalNotes:(null==j?void 0:null===(b=j.data)||void 0===b?void 0:b.additionalNotes)||""},[S,E]=(0,r.useState)(A),T=e=>{let{name:t,value:a,type:n,checked:i}=e.target;E({...S,[t]:"checkbox"===n?i:a})},B=async e=>{e.preventDefault();let t={type:S.type,title:S.title,author:S.author,data:{firstName:S.firstName,lastName:S.lastName,birthDate:S.birthDate,gender:S.gender,allergies:S.allergies,currentMedications:S.currentMedications,chronicDiseases:S.chronicDiseases,currentSymptoms:S.currentSymptoms,familyHistory:S.familyHistory,smoking:S.smoking,alcohol:S.alcohol,weight:S.weight,height:S.height,bloodPressure:S.bloodPressure,additionalNotes:S.additionalNotes},patientId:S.patientId};try{let e=await fetch("/api/medical_record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();console.log(a),e.ok?(console.log("Dokument erfolgreich gespeichert:",a),E(A),D&&D()):console.error("Fehler beim Speichern des Dokuments:",a),window.location.reload()}catch(e){console.error("Fehler beim Senden der Anfrage:",e)}};return(0,i.jsxs)("form",{onSubmit:B,children:[(0,i.jsx)("h1",{children:"Anamnese"}),(0,i.jsx)("input",{name:"title",value:S.title,onChange:T,placeholder:"Titel",className:N().input}),(0,i.jsx)("input",{name:"firstName",value:S.firstName,onChange:T,placeholder:"Vorname",className:N().input}),(0,i.jsx)("input",{name:"lastName",value:S.lastName,onChange:T,placeholder:"Nachname",className:N().input}),(0,i.jsx)("input",{type:"date",name:"birthDate",value:S.birthDate,onChange:T,className:N().input}),(0,i.jsx)("br",{}),(0,i.jsxs)("select",{name:"gender",className:N().input,value:S.gender,onChange:T,children:[(0,i.jsx)("option",{value:"",children:"Geschlecht w\xe4hlen"}),(0,i.jsx)("option",{value:"male",children:"Mann"}),(0,i.jsx)("option",{value:"female",children:"Frau"})]}),(0,i.jsx)("input",{name:"allergies",value:S.allergies,onChange:T,placeholder:"Allergien",className:N().input}),(0,i.jsx)("input",{name:"currentMedications",value:S.currentMedications,onChange:T,placeholder:"Aktuelle Medikamente",className:N().input}),(0,i.jsx)("input",{name:"chronicDiseases",value:S.chronicDiseases,onChange:T,placeholder:"Chronische Erkrankungen",className:N().input}),(0,i.jsx)("input",{name:"currentSymptoms",value:S.currentSymptoms,onChange:T,placeholder:"Aktuelle Symptome",className:N().input}),(0,i.jsx)("textarea",{name:"familyHistory",value:S.familyHistory,onChange:T,placeholder:"Familienanamnese",className:N().input}),(0,i.jsx)("br",{}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",name:"smoking",checked:S.smoking,onChange:T}),"Rauchen"]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",name:"alcohol",checked:S.alcohol,onChange:T}),"Alkohol"]}),(0,i.jsx)("input",{type:"number",name:"weight",value:S.weight,onChange:T,placeholder:"Gewicht (kg)",className:N().input}),(0,i.jsx)("input",{type:"number",name:"height",value:S.height,onChange:T,placeholder:"Gr\xf6\xdfe (cm)",className:N().input}),(0,i.jsx)("input",{name:"bloodPressure",value:S.bloodPressure,onChange:T,placeholder:"Blutdruck (bpm)",className:N().input}),(0,i.jsx)("textarea",{name:"additionalNotes",value:S.additionalNotes,onChange:T,placeholder:"Zus\xe4tzliche Notizen",className:N().input}),"view"!==y&&(0,i.jsx)("button",{type:"submit",children:"Speichern"})]})}},{label:"Untersuchungsprotokoll",value:"unt",component:function(e){let{sampleDocuments:t,setSampleDocuments:a,mode:n}=e,[l,o]=(0,r.useState)({type:"unt",Titel:"",UntersuchungsDatum:"",Untersucher:"",Befunde:"",Diagnose:"",Empfehlungen:"",NachkontrollDatum:"",Bildgebung:"",LaborErgebnisse:"",Vitalzeichen:{Herzfrequenz:"",Blutdruck:"",Atemfrequenz:"",Temperatur:"",Sauerstoffsättigung:""},KörperlicheUntersuchung:{Allgemeinzustand:"",KopfUndHals:"",Brustkorb:"",Bauch:"",Extremitäten:"",Neurologisch:""},ZusätzlicheNotizen:""}),[s,c]=(0,r.useState)(""),d=e=>{let{name:t,value:a,type:n,checked:i}=e.target;if(t.includes(".")){let[e,n]=t.split(".");o(t=>({...t,[e]:{...t[e],[n]:a}}))}else o(e=>({...e,[t]:"checkbox"===n?i:a}))},u=Object.entries(l).filter(e=>{let[t,a]=e;return t.includes(s)||JSON.stringify(a).includes(s)}).map(e=>{let[t,a]=e;return(0,i.jsxs)("div",{className:j().formGroup,children:[(0,i.jsx)("label",{children:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),"object"==typeof a?Object.entries(a).map(e=>{let[a,n]=e;return(0,i.jsx)("input",{name:"".concat(t,".").concat(a),value:n,onChange:d,placeholder:a.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),className:j().inputFeld},a)}):"UntersuchungsDatum"===t||"NachkontrollDatum"===t?(0,i.jsx)("input",{type:"date",name:t,value:a,onChange:d,className:j().inputFeld}):(0,i.jsx)("input",{name:t,value:a,onChange:d,placeholder:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),className:j().inputFeld})]},t)});return(0,i.jsxs)("div",{className:j().formularContainer,children:[(0,i.jsx)("h2",{className:j().titelUeberschrift,children:"Untersuchungsprotokoll erstellen"}),(0,i.jsx)("input",{type:"text",placeholder:"Feldsuche",value:s,onChange:e=>c(e.target.value),className:j().inputFeld}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(e=>[...e||[],l]),o({Titel:"",UntersuchungsDatum:"",Untersucher:"",Befunde:"",Diagnose:"",Empfehlungen:"",NachkontrollDatum:"",Bildgebung:"",LaborErgebnisse:"",Vitalzeichen:{Herzfrequenz:"",Blutdruck:"",Atemfrequenz:"",Temperatur:"",Sauerstoffsättigung:""},KörperlicheUntersuchung:{Allgemeinzustand:"",KopfUndHals:"",Brustkorb:"",Bauch:"",Extremitäten:"",Neurologisch:""},ZusätzlicheNotizen:""})},children:[u.length>0?u:(0,i.jsx)("p",{className:j().keineFelderNachricht,children:"Keine passenden Felder gefunden."}),"view"!==n&&(0,i.jsx)("button",{type:"submit",className:j().submitButton,children:"Speichern"})]})]})}},{label:"Arztbrief",value:"bri",component:function(e){let{document:t,onSave:a,mode:n}=e,[l,o]=(0,r.useState)({type:"bri",title:(null==t?void 0:t.title)||"",patientName:(null==t?void 0:t.patientName)||"",patientID:(null==t?void 0:t.patientID)||"",dateOfBirth:(null==t?void 0:t.dateOfBirth)||"",gender:(null==t?void 0:t.gender)||"",address:(null==t?void 0:t.address)||"",diagnosis:(null==t?void 0:t.diagnosis)||"",findings:(null==t?void 0:t.findings)||"",therapy:(null==t?void 0:t.therapy)||"",medication:(null==t?void 0:t.medication)||"",recommendations:(null==t?void 0:t.recommendations)||"",followUp:(null==t?void 0:t.followUp)||"",doctorName:(null==t?void 0:t.doctorName)||"",doctorSignature:(null==t?void 0:t.doctorSignature)||"",issueDate:(null==t?void 0:t.issueDate)||new Date().toISOString().split("T")[0]}),s=e=>{let{name:t,value:a}=e.target;o({...l,[t]:a})};return(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(l)},children:[(0,i.jsx)("h2",{children:"Arztbrief"}),(0,i.jsx)("input",{name:"title",value:l.title,onChange:s,placeholder:"Titel des Arztbriefs",className:N().input}),(0,i.jsx)("input",{name:"patientName",value:l.patientName,onChange:s,placeholder:"Name des Patienten",className:N().input}),(0,i.jsx)("input",{name:"patientID",value:l.patientID,onChange:s,placeholder:"Patienten-ID",className:N().input}),(0,i.jsx)("input",{type:"date",name:"dateOfBirth",value:l.dateOfBirth,onChange:s,className:N().input}),(0,i.jsxs)("select",{name:"gender",className:N().input,value:l.gender,onChange:s,children:[(0,i.jsx)("option",{value:"",children:"Geschlecht w\xe4hlen"}),(0,i.jsx)("option",{value:"male",children:"M\xe4nnlich"}),(0,i.jsx)("option",{value:"female",children:"Weiblich"}),(0,i.jsx)("option",{value:"other",children:"Anderes"})]}),(0,i.jsx)("input",{name:"address",value:l.address,onChange:s,placeholder:"Adresse des Patienten",className:N().input}),(0,i.jsx)("textarea",{name:"diagnosis",value:l.diagnosis,onChange:s,placeholder:"Diagnose",className:N().input}),(0,i.jsx)("textarea",{name:"findings",value:l.findings,onChange:s,placeholder:"Befunde",className:N().input}),(0,i.jsx)("textarea",{name:"therapy",value:l.therapy,onChange:s,placeholder:"Therapie",className:N().input}),(0,i.jsx)("textarea",{name:"medication",value:l.medication,onChange:s,placeholder:"Medikation",className:N().input}),(0,i.jsx)("textarea",{name:"recommendations",value:l.recommendations,onChange:s,placeholder:"Empfehlungen",className:N().input}),(0,i.jsx)("input",{type:"date",name:"followUp",value:l.followUp,onChange:s,placeholder:"Nachfolgetermin",className:N().input}),(0,i.jsx)("input",{name:"doctorName",value:l.doctorName,onChange:s,placeholder:"Name des Arztes",className:N().input}),(0,i.jsx)("input",{name:"doctorSignature",value:l.doctorSignature,onChange:s,placeholder:"Arztsignatur",className:N().input}),(0,i.jsx)("input",{type:"date",name:"issueDate",value:l.issueDate,onChange:s,placeholder:"Ausstellungsdatum",className:N().input}),"view"!==n&&(0,i.jsx)("button",{type:"submit",children:"Speichern"})]})}},{label:"Rezept",value:"rez",component:function(e){var t,a,n,l,o,c,d;let{document:u,onSave:m}=e,{id:p}=(0,s.useRouter)().query,h=(0,v.Z)(),g=null==h?void 0:h.user,[_,x]=(0,r.useState)({type:"rez",title:(null==u?void 0:u.title)||"Titel",author:"".concat(g.first_name," ").concat(g.surname)||"",patientFirstName:(null==u?void 0:null===(t=u.data)||void 0===t?void 0:t.patientFirstName)||"",patientLastName:(null==u?void 0:null===(a=u.data)||void 0===a?void 0:a.patientLastName)||"",birthDate:(null==u?void 0:null===(n=u.data)||void 0===n?void 0:n.birthDate)||"",medications:(null==u?void 0:null===(l=u.data)||void 0===l?void 0:l.medications)||[{id:Date.now(),medicationName:"",dosage:"",intakeFrequency:"",duration:"",specialInstructions:""}],prescribingDoctor:(null==u?void 0:null===(o=u.data)||void 0===o?void 0:o.prescribingDoctor)||"",issueDate:(null==u?void 0:null===(c=u.data)||void 0===c?void 0:c.issueDate)||new Date().toISOString().split("T")[0],additionalNotes:(null==u?void 0:null===(d=u.data)||void 0===d?void 0:d.additionalNotes)||""}),N=e=>{let{name:t,value:a}=e.target;x({..._,[t]:a})},b=(e,t,a)=>{let n=_.medications.map((n,i)=>i===e?{...n,[t]:a}:n);x({..._,medications:n})},j=e=>{let t=_.medications.filter((t,a)=>a!==e);x({..._,medications:t})},f=async e=>{e.preventDefault();let t={patientId:p,type:"rez",title:_.title||"Title",author:_.author,data:{patientFirstName:_.patientFirstName,patientLastName:_.patientLastName,birthDate:_.birthDate,medications:_.medications,prescribingDoctor:_.prescribingDoctor,issueDate:_.issueDate,additionalNotes:_.additionalNotes}};try{let e=await fetch("/api/medical_record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();console.log("Medical doc saved",a),e.ok?(console.log("Dokument gespeichert:",a),m&&m(a)):console.error("Fehler beim Speichern:",a.error)}catch(e){console.error("Fehler bei der Anfrage:",e)}};return(0,i.jsxs)("div",{className:k().formContainer,children:[(0,i.jsx)("h2",{className:k().titleHeading,children:"Rezept"}),(0,i.jsxs)("form",{onSubmit:f,children:[(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Rezepttitel"}),(0,i.jsx)("input",{className:k().inputField,name:"title",value:_.title,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Vorname des Patienten"}),(0,i.jsx)("input",{className:k().inputField,name:"patientFirstName",value:_.patientFirstName,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Nachname des Patienten"}),(0,i.jsx)("input",{className:k().inputField,name:"patientLastName",value:_.patientLastName,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Geburtsdatum"}),(0,i.jsx)("input",{className:k().inputField,type:"date",name:"birthDate",value:_.birthDate,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Medikamente"}),_.medications.map((e,t)=>(0,i.jsxs)("div",{className:k().medicationItem,children:[(0,i.jsxs)("h3",{className:k().medicationTitle,children:["Medikament ",t+1," "]}),(0,i.jsx)("input",{className:k().inputField,placeholder:"Medikamentenname",value:e.medicationName,onChange:e=>b(t,"medicationName",e.target.value)}),(0,i.jsx)("input",{className:k().inputField,placeholder:"Dosierung (z.B. 500mg)",value:e.dosage,onChange:e=>b(t,"dosage",e.target.value)}),(0,i.jsx)("input",{className:k().inputField,placeholder:"Einnahmeh\xe4ufigkeit",value:e.intakeFrequency,onChange:e=>b(t,"intakeFrequency",e.target.value)}),(0,i.jsx)("input",{className:k().inputField,placeholder:"Dauer der Einnahme",value:e.duration,onChange:e=>b(t,"duration",e.target.value)}),(0,i.jsx)("textarea",{className:k().textareaField,placeholder:"Besondere Hinweise",value:e.specialInstructions,onChange:e=>b(t,"specialInstructions",e.target.value)}),(0,i.jsx)("button",{type:"button",className:k().removeButton,onClick:()=>j(t),children:"Entfernen"})]},e.id)),(0,i.jsx)("button",{type:"button",className:k().addButton,onClick:()=>{x({..._,medications:[..._.medications,{id:Date.now(),medicationName:"",dosage:"",intakeFrequency:"",duration:"",specialInstructions:""}]})},children:"Medikament hinzuf\xfcgen"})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Verschreibender Arzt"}),(0,i.jsx)("input",{className:k().inputField,name:"prescribingDoctor",value:_.prescribingDoctor,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Ausstellungsdatum"}),(0,i.jsx)("input",{className:k().inputField,type:"date",name:"issueDate",value:_.issueDate,onChange:N})]}),(0,i.jsxs)("div",{className:k().formGroup,children:[(0,i.jsx)("label",{children:"Zus\xe4tzliche Notizen"}),(0,i.jsx)("textarea",{className:k().textareaField,name:"additionalNotes",value:_.additionalNotes,onChange:N})]}),"view"!==mode&&(0,i.jsx)("button",{type:"submit",className:k().submitButton,children:"Rezept speichern"})]})]})}},{label:"Arbeitsunf\xe4higkeitsbescheinigung",value:"aub",component:function(e){let{document:t,onSave:a,mode:n}=e,[l,o]=(0,r.useState)({type:"aub",title:(null==t?void 0:t.title)||"",patientFirstName:(null==t?void 0:t.patientFirstName)||"",patientLastName:(null==t?void 0:t.patientLastName)||"",birthDate:(null==t?void 0:t.birthDate)||"",startDate:(null==t?void 0:t.startDate)||"",endDate:(null==t?void 0:t.endDate)||"",partialIncapacity:(null==t?void 0:t.partialIncapacity)||!1,incapacityReason:(null==t?void 0:t.incapacityReason)||"",prescribingDoctor:(null==t?void 0:t.prescribingDoctor)||"",issueDate:(null==t?void 0:t.issueDate)||new Date().toISOString().split("T")[0],additionalNotes:(null==t?void 0:t.additionalNotes)||""}),s=e=>{let{name:t,type:a,value:n,checked:i}=e.target;o({...l,[t]:"checkbox"===a?i:n})};return(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(l)},className:D().formContainer,children:[(0,i.jsx)("h1",{className:D().titleHeading,children:"AU"}),(0,i.jsx)("h2",{className:D().h2,children:"Bescheinigung"}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{className:D().inputField,name:"title",value:l.title,onChange:s,placeholder:"Titel der Bescheinigung",disabled:"view"===n})}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{className:D().inputField,name:"patientFirstName",value:l.patientFirstName,onChange:s,placeholder:"Vorname des Patienten",disabled:"view"===n})}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{className:D().inputField,name:"patientLastName",value:l.patientLastName,onChange:s,placeholder:"Nachname des Patienten",disabled:"view"===n})}),(0,i.jsx)("h4",{children:"Geburtsdatum"}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{type:"date",className:D().inputField,name:"birthDate",value:l.birthDate,onChange:s,disabled:"view"===n})}),(0,i.jsx)("h3",{children:"Zeitraum der Arbeitsunf\xe4higkeit"}),(0,i.jsx)("h4",{children:"Startdatum"}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{type:"date",className:D().inputField,name:"startDate",value:l.startDate,onChange:s,disabled:"view"===n})}),(0,i.jsx)("h4",{children:"Enddatum"}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{type:"date",className:D().inputField,name:"endDate",value:l.endDate,onChange:s,disabled:"view"===n})}),(0,i.jsx)("div",{className:D().checkboxGroup,children:(0,i.jsxs)("label",{className:D().checkboxLabel,children:[(0,i.jsx)("input",{type:"checkbox",name:"partialIncapacity",checked:l.partialIncapacity,onChange:s,disabled:"view"===n}),"Teilweise Arbeitsunf\xe4higkeit"]})}),l.partialIncapacity&&(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("textarea",{className:D().textareaField,name:"incapacityReason",value:l.incapacityReason,onChange:s,placeholder:"Grund der teilweisen Arbeitsunf\xe4higkeit",disabled:"view"===n})}),(0,i.jsx)("h3",{children:"Arztinformationen"}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{className:D().inputField,name:"prescribingDoctor",value:l.prescribingDoctor,onChange:s,placeholder:"Verschreibender Arzt",disabled:"view"===n})}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("input",{type:"date",className:D().inputField,name:"issueDate",value:l.issueDate,onChange:s,disabled:"view"===n})}),(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("textarea",{className:D().textareaField,name:"additionalNotes",value:l.additionalNotes,onChange:s,placeholder:"Zus\xe4tzliche Notizen",disabled:"view"===n})}),"view"!==n&&(0,i.jsx)("div",{className:D().formGroup,children:(0,i.jsx)("button",{type:"submit",className:D().submitButton,children:"speichern"})})]})}}];function S(){let{data:e,status:t}=(0,w.useSession)(),a=(0,s.useRouter)(),{id:n}=a.query,[l,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(),[m,p]=(0,r.useState)(),[h,g]=(0,r.useState)();(0,r.useEffect)(()=>{"unauthenticated"===t&&a.push("/login")},[t]),(0,r.useEffect)(()=>{(async()=>{try{if(console.log(n,"Patient - ID"),n){let e=await fetch("/api/GET/get_patient_id/".concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();o(t),console.log(t)}else console.log("Response not ok")}else console.log("ID is undefined")}catch(e){console.error(e)}})()},[a.query.id]),(0,r.useEffect)(()=>{console.log(m)},[m]);let[v,x]=(0,r.useState)([]),[N,b]=(0,r.useState)([]),[j,f]=(0,r.useState)(!1),[D,y]=(0,r.useState)({Name:null==l?void 0:l.full_name,Krankenversicherung:"",Privat:"Nein",Geburtsdatum:"",Geschlecht:"",Adresse:"",Telefonnummer:"",Email:"",Notfallkontakt:""});(0,r.useEffect)(()=>{(async()=>{try{if(n&&!j){f(!0);let e=await fetch("/api/GET/documents?patient_id=".concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();if(Array.isArray(t)){let e=t.map(e=>({...e,createdAt:e.createdAt?new Date(e.createdAt):null}));x(e),b(e)}else console.error("Die API-Daten sind nicht im erwarteten Format.")}else console.log("API-Response war nicht erfolgreich.")}else console.log("ID ist nicht definiert oder Ladevorgang l\xe4uft bereits.")}catch(e){console.error("Fehler beim Abrufen der Dokumente:",e)}finally{f(!1)}})()},[n]),(0,r.useEffect)(()=>{b(v),console.log("DOCUMENTS: ",N)},[v]),console.log("MEDICAL DOCUMENTS: ",N),console.log(N.map(e=>e._id));let[k,C]=(0,r.useState)({open:!1,document_id:N._id});console.log("Delete Modal Object ",k);let[S,E]=(0,r.useState)(A[0]),[T,B]=(0,r.useState)("view"),[z,G]=(0,r.useState)(null),[I,U]=(0,r.useState)(""),[L,P]=(0,r.useState)(!1),[R,O]=(0,r.useState)("all"),[H,M]=(0,r.useState)(!1),K=e=>{G(e),console.log("DES IS DOC: ",e),console.log("CURRENT ",N),E(A.find(t=>t.value===e.type)||A[0]),B("view"),M(!0),p(e)},Z=async e=>{try{let t=await fetch("/api/DELETE/medical_record/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch...");let a=await t.json();return console.log("Data to delete: ",a),a}catch(e){return console.error("Error: ",e),null}},q=async()=>{C(!1),window.location.reload(),console.log("Attempting to delete document with ID:",k.document_id);try{let e=await Z(k.document_id);console.log("DELETED DATA: ",e),e?(b(e=>e.filter(e=>e._id!==k.document_id)),M(!1),console.log("Document deleted successfully!")):console.error("Error: Dokument konnte nicht gel\xf6scht werden.")}catch(e){console.error("Fehler beim L\xf6schen:",e)}},V=async e=>{try{let t=await fetch("/api/DELETE/patient/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch...");let n=await t.json();return console.log("Data to delete: ",n),a.replace("/appointment"),n}catch(e){return console.error("Error: ",e),null}},J=async()=>{C(!1),window.location.reload(),console.log("Attempting to delete document with ID:",n);try{let e=await V(n);console.log("DELETED DATA: ",e),e?(b(e=>e.filter(e=>e._id!==n)),M(!1),console.log("Document deleted successfully!")):console.error("Error: Dokument konnte nicht gel\xf6scht werden.")}catch(e){console.error("Fehler beim L\xf6schen:",e)}},Q=e=>{if(!e||!e._id){console.error("Ung\xfcltiges Dokument oder fehlende ID.",e);return}console.log("Selected document ID: ",e._id),C({open:!0,document_id:e._id})},X=()=>{M(!1),E(null),G(null),p(null)},W=async e=>{e.preventDefault();let t=$();if(console.log("Formdata before update",D),0===Object.keys(t).length)try{let e=await fetch("/api/GET/patients/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:D.Name,insurance:D.Krankenversicherung,is_private:D.Privat,gender:D.Geschlecht,birth_date:D.Geburtsdatum,address:D.Adresse,phoneNumber:D.Telefonnummer,email:D.Email,emergency_contact:D.Notfallkontakt})});e.ok?(console.log("Patientendaten aktualisiert:",D),u(!1),window.location.reload()):console.error("Fehler beim Aktualisieren der Patientendaten:",e.statusText)}catch(e){console.error("Error:",e.message)}else g(t)},Y=e=>{let{name:t,value:a}=e.target;y(e=>({...e,[t]:a}))},$=()=>{let e={};return D.Name||(e.Name="Name ist erforderlich."),D.Krankenversicherung||(e.Krankenversicherung="Krankenversicherung ist erforderlich."),D.Geburtsdatum||(e.Geburtsdatum="Geburtsdatum ist erforderlich."),D.Email||(e.Email="Email ist erforderlich."),e},ee=("all"===R?N:N.filter(e=>e.type===R)).reduce((e,t)=>(e[t.createdAt]=e[t.createdAt]||[],e[t.createdAt].push(t),e),{});return console.log("DOCUMENTS ARRAY: ",N),console.log("DELETE MODAL STATE: ",k),(0,i.jsxs)("div",{className:d().container,children:[(0,i.jsx)(F(),{href:"/appointment",children:(0,i.jsx)("h3",{children:"Zur\xfcck zum Terminkalendar"})}),(0,i.jsx)("h1",{children:"Patientendetails"}),(0,i.jsxs)("p",{children:["Patient ID: ",n]}),(0,i.jsxs)("div",{className:d().patient,children:[(0,i.jsxs)("div",{className:d().content,children:[(0,i.jsxs)("div",{className:d().search,onFocus:()=>P(!0),onBlur:()=>P(!1),children:[(0,i.jsx)("input",{type:"text",placeholder:"Geben Sie [tag] + Leertaste ein.",value:I,onChange:e=>U(e.target.value),onKeyDown:e=>{if(" "===e.key){let t=A.find(e=>e.label.toLowerCase()===I.toLowerCase()||e.value.toLowerCase()===I.toLowerCase());t&&(E(t),B("edit"),G(null),U(""),P(!1),M(!0)),e.preventDefault()}},className:d().input}),L&&(0,i.jsx)("ul",{className:d().dropdown,children:A.filter(e=>e.label.toLowerCase().includes(I.toLowerCase())||e.value.toLowerCase().includes(I.toLowerCase())).map(e=>(0,i.jsxs)("li",{onClick:()=>U(e.value),children:[e.label," ",(0,i.jsxs)("span",{children:[e.value," + Leertaste"]})]},e.value))})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:d().filters,children:[(0,i.jsx)("button",{className:"".concat(d().filterButton," ").concat("all"===R?d().selected:""),onClick:()=>O("all"),children:"Alle Eintr\xe4ge"}),A.map(e=>(0,i.jsx)("button",{className:"".concat(d().filterButton," ").concat(R===e.value?d().selected:""),onClick:()=>O(e.value),children:e.label},e.value))]}),Object.keys(ee).map(e=>(0,i.jsxs)("div",{className:d().query,children:[(0,i.jsx)("h3",{children:e&&new Date(e).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),ee[e].map(e=>(0,i.jsxs)("div",{className:d().documentItem,children:[(0,i.jsx)("span",{className:d().docType,children:e.type}),(0,i.jsx)("span",{className:d().docTitle,children:e.title}),(0,i.jsx)("span",{className:d().docDate,children:e.createdAt?new Date(e.createdAt).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Kein Datum"}),(0,i.jsx)("button",{className:d().viewButton,onClick:()=>K(e),children:"Anzeigen"}),(0,i.jsx)("button",{className:d().deleteButton,onClick:()=>Q(e),children:"L\xf6schen"})]},e.id))]},e))]})]}),(0,i.jsx)(_,{onDelete:J,onEdit:()=>{l&&(y({Name:l.full_name||"",Krankenversicherung:l.insurance||"",Privat:l.is_private||"Nein",Geburtsdatum:l.birth_date||"",Geschlecht:l.gender||"",Adresse:l.address||"",Telefonnummer:l.phoneNumber||"",Email:l.email||"",Notfallkontakt:l.emergency_contact||""}),u(!0))},patientData:l||null})]}),H&&(0,i.jsx)("div",{className:d().fullscreenModal,children:(0,i.jsxs)("div",{className:d().modalContent,children:[(0,i.jsx)("button",{onClick:X,className:d().closeButton,children:"✖"}),(null==S?void 0:S.component)?(0,i.jsx)(S.component,{document:m,onClose:()=>X(),onSave:e=>{let t={...e,id:Date.now(),date:new Date().toISOString().split("T")[0],type:e.type};switch(console.log("Neues Dokument: ",t),e.type){case"ana":t={...t,firstName:e.firstName||"",lastName:e.lastName||"",birthDate:e.birthDate||"",gender:e.gender||"",allergies:e.allergies||"",currentMedications:e.currentMedications||"",chronicDiseases:e.chronicDiseases||"",currentSymptoms:e.currentSymptoms||"",familyHistory:e.familyHistory||"",smoking:e.smoking||!1,alcohol:e.alcohol||!1,weight:e.weight||0,height:e.height||0,bloodPressure:e.bloodPressure||"",additionalNotes:e.additionalNotes||""};break;case"bri":t={...t,patientName:e.patientName||"",patientID:e.patientID||"",dateOfBirth:e.dateOfBirth||"",gender:e.gender||"",address:e.address||"",diagnosis:e.diagnosis||"",findings:e.findings||"",therapy:e.therapy||"",medication:e.medication||"",recommendations:e.recommendations||"",followUp:e.followUp||"",doctorName:e.doctorName||"",doctorSignature:e.doctorSignature||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0]};break;case"aub":t={...t,patientFirstName:e.patientFirstName||"",patientLastName:e.patientLastName||"",birthDate:e.birthDate||"",startDate:e.startDate||"",endDate:e.endDate||"",partialIncapacity:e.partialIncapacity||!1,incapacityReason:e.incapacityReason||"",prescribingDoctor:e.prescribingDoctor||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e.additionalNotes||""};break;case"rezept":t={...t,patientFirstName:e.patientFirstName||"",patientLastName:e.patientLastName||"",birthDate:e.birthDate||"",medications:e.medications||[],prescribingDoctor:e.prescribingDoctor||"",issueDate:e.issueDate||new Date().toISOString().split("T")[0],additionalNotes:e.additionalNotes||""};break;case"unt":t={...t,Titel:e.Titel||"",UntersuchungsDatum:e.UntersuchungsDatum||"",Untersucher:e.Untersucher||"",Befunde:e.Befunde||"",Diagnose:e.Diagnose||"",Empfehlungen:e.Empfehlungen||"",NachkontrollDatum:e.NachkontrollDatum||"",Bildgebung:e.Bildgebung||"",LaborErgebnisse:e.LaborErgebnisse||"",Vitalzeichen:e.Vitalzeichen||{},KörperlicheUntersuchung:e.KörperlicheUntersuchung||{},ZusätzlicheNotizen:e.ZusätzlicheNotizen||""};break;default:console.error("Unbekannter Typ: ",e.type)}z?b(e=>e.map(e=>e.id===z.id?t:e)):b(e=>[...e,t]),M(!1)},mode:T,documents:N,setSampleDocuments:b}):(0,i.jsx)("p",{children:"Kein Formular verf\xfcgbar"})]})}),k.open&&(0,i.jsx)("div",{className:d().deleteModal,children:(0,i.jsxs)("div",{className:d().modalContent,children:[(0,i.jsx)("p",{children:"Sind Sie sicher, dass Sie dieses Dokument l\xf6schen m\xf6chten?"}),(0,i.jsx)("button",{onClick:q,className:d().deleteButton,children:"Dokument l\xf6schen"}),(0,i.jsx)("button",{onClick:()=>C({open:!1,document_id:N._id}),className:d().cancelButton,children:"Abbrechen"})]})}),c&&(0,i.jsx)("div",{className:d().modalOverlay,children:(0,i.jsxs)("div",{className:d().modalContent,children:[(0,i.jsx)("h2",{children:"Patienten bearbeiten"}),(0,i.jsxs)("form",{className:d().zindex,onSubmit:W,children:[Object.keys(D).map(e=>(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{children:e}),"Privat"===e?(0,i.jsxs)("select",{name:e,value:D[e],onChange:Y,className:d().selectInput,children:[(0,i.jsx)("option",{value:"Ja",children:"Ja"}),(0,i.jsx)("option",{value:"Nein",children:"Nein"})]}):(0,i.jsx)("input",{type:"text",name:e,value:D[e],onChange:Y,className:d().textInput})]},e)),(0,i.jsxs)("div",{className:d().modalActions,children:[(0,i.jsx)("button",{type:"submit",children:"Hinzuf\xfcgen"}),(0,i.jsx)("button",{type:"button",onClick:()=>u(!1),children:"Abbrechen"})]})]})]})})]})}function E(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"HestiaMed"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(S,{})]})}},84677:e=>{e.exports={formContainer:"AUForm_formContainer__DS9em",body:"AUForm_body__MYUT_",titleHeading:"AUForm_titleHeading__D9vWJ",h2:"AUForm_h2__PtROG",inputField:"AUForm_inputField__mtEox",selectField:"AUForm_selectField__ytdhd",textareaField:"AUForm_textareaField__rC9Oj",formGroup:"AUForm_formGroup__XHdjr",checkboxGroup:"AUForm_checkboxGroup__MfxZJ",checkboxLabel:"AUForm_checkboxLabel__CnuyW",submitButton:"AUForm_submitButton__72CFj",error:"AUForm_error__JKzkw"}},6951:e=>{e.exports={formContainer:"AnamneseForm_formContainer__ggq1V",titleHeading:"AnamneseForm_titleHeading___tJ80",inputField:"AnamneseForm_inputField__WFywG",selectField:"AnamneseForm_selectField__6pq9u",textareaField:"AnamneseForm_textareaField__vbHAl",formGroup:"AnamneseForm_formGroup__tClry",checkboxGroup:"AnamneseForm_checkboxGroup__EGLuF",checkboxLabel:"AnamneseForm_checkboxLabel__OkaC7",submitButton:"AnamneseForm_submitButton__s_zdK",error:"AnamneseForm_error__2LWQv",input:"AnamneseForm_input__gXZpz"}},58207:e=>{e.exports={formContainer:"RezeptForm_formContainer__J0eY8",titleHeading:"RezeptForm_titleHeading__mCP3P",inputField:"RezeptForm_inputField__3QHll",selectField:"RezeptForm_selectField__PAEGi",textareaField:"RezeptForm_textareaField__fZYoQ",formGroup:"RezeptForm_formGroup__JAFKJ",sectionHeading:"RezeptForm_sectionHeading__t8VQm",buttonGroup:"RezeptForm_buttonGroup__jpLUA",addMedicationButton:"RezeptForm_addMedicationButton__zlBk3",removeMedicationButton:"RezeptForm_removeMedicationButton__njB7S",checkboxGroup:"RezeptForm_checkboxGroup__bECOX",error:"RezeptForm_error__xprd8",medicationTitle:"RezeptForm_medicationTitle__DcWLQ",addButton:"RezeptForm_addButton__PlgLV",removeButton:"RezeptForm_removeButton__oQUk1",medicationItem:"RezeptForm_medicationItem__OX1xX",submitButton:"RezeptForm_submitButton__70UUA"}},22067:e=>{e.exports={formularContainer:"UntersuchungsprotokollForm_formularContainer__OTlaB",submitButton:"UntersuchungsprotokollForm_submitButton__X03fh",errorContainer:"UntersuchungsprotokollForm_errorContainer__yuj_t",error:"UntersuchungsprotokollForm_error__P90vr",saveButton:"UntersuchungsprotokollForm_saveButton___e6u5"}},43919:e=>{e.exports={patient:"patient_patient__pjHLT",content:"patient_content__Hmqr8",disable:"patient_disable__FZ4lI",modalOverlay:"patient_modalOverlay__yAZuH",container:"patient_container__2zBFg",search:"patient_search__s_lKe",input:"patient_input__rOkF5",dropdown:"patient_dropdown__7Q5v3",dropdownItem:"patient_dropdownItem__7_qpQ",formPlaceholder:"patient_formPlaceholder__Igx4F",filterButton:"patient_filterButton__GbEZQ",selected:"patient_selected__viLiY",documentItem:"patient_documentItem__SGY9B",docType:"patient_docType__7Tq5H",docTitle:"patient_docTitle__wkn30",deleteButton:"patient_deleteButton__yOThG",modal:"patient_modal__fZWkA",modalContent:"patient_modalContent__5i3ge",confirmButton:"patient_confirmButton__nmPls",cancelButton:"patient_cancelButton__DmfpD",fullscreenModal:"patient_fullscreenModal__P4_tN",closeButton:"patient_closeButton__Hcrrp",deleteModal:"patient_deleteModal__UZb8M",deleteModalText:"patient_deleteModalText__4Xn9w",modalActions:"patient_modalActions__0rHkD",modalContainer:"patient_modalContainer__8VSO_",modalHeader:"patient_modalHeader__a8m8x",inputField:"patient_inputField__15ywP",buttonContainer:"patient_buttonContainer__NktwC",saveButton:"patient_saveButton__ePDHi",formGroup:"patient_formGroup__LzZIt",error:"patient_error__h7Hq1",selectInput:"patient_selectInput__PatnL",patientItem:"patient_patientItem__gQ6nc",high:"patient_high__5N5lR",medium:"patient_medium__I6tUW",low:"patient_low__UA2CQ",fadeIn:"patient_fadeIn__Zqy2H"}},38887:e=>{e.exports={cardHeader:"PatientCard_cardHeader__j84Fn",patientCard:"PatientCard_patientCard__QdmNw",caret:"PatientCard_caret__DfuMe",rotate:"PatientCard_rotate__bTysO",cardContent:"PatientCard_cardContent__Hvj4V",cardRow:"PatientCard_cardRow__yqXDS"}}},e=>{var t=t=>e(e.s=t);e.O(0,[917,636,593,792],()=>t(60610)),_N_E=e.O()}]);
=======
version https://git-lfs.github.com/spec/v1
oid sha256:ed8ebfbf15beac834a6b5fa4339ca816f172c55ff1a6e7df36c62954882cde8d
size 37657
>>>>>>> 27aa36463c4f1ad2a7c8c8bc2ccada08a4bca70a
